---
import { sanityClient } from 'sanity:client';
import type { Artist } from '../types/artist';
import SanityImage from './SanityImage.astro';

const artists = await sanityClient.fetch(`*[_type == "artist"]`);
---

<section class="artists">
  <div class="container">
  <h2>Our Artists</h2>

  <ul class="artist-grid">
    {
      artists.map((artist: Artist) => (
        <li>
          <a href={'/artists/' + artist.slug.current} class="artist-card">
            <div class="artist-image">
              <SanityImage node={artist.image} width={480} />
            </div>
            <h3>{artist.name}</h3>
          </a>
        </li>
      ))
    }
  </ul>

  <div class="artists-cta">
    <a href="/artists" class="button">View All Artists</a>
  </div>
  </div>
</section>

<style>
  .artists {
    background-color: #f5f5f5;
    padding-block: 4rem;
    text-align: center;
  }

  h2 {
    font-family: var(--heading-font);
    font-size: 2.5rem;
    color: var(--primary-color);
    margin-block: 0 2rem;
  }

  .artist-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 1.5rem;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .artist-card {
    display: block;
    color: white;
    text-decoration: none;
    background-color: #1d1d1d;
    border-radius: 0.25rem;
    overflow: hidden;
    transition: transform 0.2s ease;

    &:hover {
      text-decoration: none;
      transform: translateY(-4px);

      & img {
        scale: 1.05;
      }
    }
  }

  .artist-image {
    aspect-ratio: 1;
    overflow: hidden;
  }

  .artist-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: scale 0.3s ease;
  }

  h3 {
    font-family: var(--heading-font);
    font-size: 1.5rem;
    margin-block: 0.75rem;
  }

  .artists-cta {
    margin-block-start: 2rem;
  }
</style>
