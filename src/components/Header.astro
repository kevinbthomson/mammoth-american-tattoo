---
import { sanityClient } from 'sanity:client';
import Image from 'astro/components/Image.astro';
import Hamburger from './Hamburger.astro';
import Logo from '../assets/logo.png';
const siteSettings = await sanityClient.fetch(`*[_type == "siteSettings"]`);

const site = siteSettings[0];

import Nav from './Nav.astro';
import NavSecondary from './NavSecondary.astro';

const isHomePage: boolean = Astro.props.isHomePage;
---

<header class="site-header">
  <div class="container">
    <Nav aria-label="Main" />
    <a
      href="/"
      class="logo"
      aria-label="Home"
      style="display: flex; align-items: center; gap: 1rem;"
    >
      <h4 class="new-rocker-regular">Mammoth American</h4>
    </a>
    <NavSecondary aria-label="Secondary" />
  </div>

  <Hamburger />
</header>

<style>
  header.site-header {
    /* background: #1c1c1c; */
    background: #000000;
    box-shadow: 0 0 20px rgb(0, 0, 0, 0.624);
    box-sizing: border-box;
    border-bottom: 0.5rem solid var(--primary-color);
    color: white;
    height: 7.5rem;
    overflow: hidden;
    padding: 0;
    position: fixed;
    transition: all 0.3s;
    width: 100vw;
    z-index: 1000;

    &[data-scrolled='true'] {
      border-bottom-width: 0.25rem;
      height: 4rem;
    }
  }

  .container {
    align-items: center;
    display: flex;
    height: 100%;
    justify-content: space-between;
    padding-inline: 0.5rem;
    width: min(1440px, 96vw);

    > * {
      z-index: 2;
    }
  }

  a {
    text-decoration: none;
  }
  .logo {
    color: white;
    position: relative;
    transition: all 0.3s;

    &:hover {
      scale: 1.05;
    }
  }

  h4 {
    font-size: 2rem;
    text-shadow: 0 1px 3px rgb(0, 0, 0, 0.624);
  }
</style>

<script>
  function resizeHeader(el: HTMLElement, scrolled: string) {
    el.dataset.scrolled = scrolled;
  }

  const header = document.querySelector(
    'header.site-header'
  ) as HTMLElement | null;

  window.addEventListener('scroll', () => {
    if (window.scrollY > 100) {
      if (header) resizeHeader(header, 'true');
      // if (heroBanner) resizeHeader(heroBanner, 'true');
    } else {
      if (header) resizeHeader(header, 'false');
      // if (heroBanner) resizeHeader(heroBanner, 'false');
    }
  });
</script>
